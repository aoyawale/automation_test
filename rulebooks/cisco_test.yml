---

- name: Listen for alerts using alert manager
  hosts: localhost

  sources:
    #- ansible.eda.alertmanager:
    #    host: 0.0.0.0
    #    port: 5000
    - ansible.eda.file:
      files:
        - /var/log/nic.yml
  rules:
    - name: Run playbook to start NIC
      condition:
        all: 
          - fact.ansible_net_interfaces.[0].state == "down" 
          - fact.gathered.enabled == "false"

      action:
        run_job_template:
          name: "nxos_nic_up"
          organization: Default
          job_args:
            extra_vars:
                
